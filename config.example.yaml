# MCP-Flow Configuration

# LLM服务配置（支持多个provider，自动fallback）
llm_providers:
  # 主力服务 - 内网Doubao（优先使用，免费）
  primary:
    name: "doubao"
    provider: "openai"  # 使用OpenAI兼容接口
    api_key: "YOUR_PRIMARY_API_KEY_HERE"
    base_url: "http://your-doubao-server:3008/v1"
    model: "Doubao-Seed-1.6"
    timeout: 60
    max_retries: 3

  # 备用服务 - OpenAI官方（自动fallback）
  fallback:
    name: "openai"
    provider: "openai"
    api_key: "YOUR_OPENAI_API_KEY_HERE"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4o-mini"  # 使用便宜的mini版本
    timeout: 60
    max_retries: 3

# 任务分配配置（指定每个任务使用哪个服务）
task_assignments:
  generation: "primary"       # 数据生成用主力服务（Doubao）
  verification: "primary"     # 验证用主力服务
  scoring: "primary"          # 评分用主力服务
  function_call: "primary"    # 函数调用生成用主力服务

# 过滤策略配置
filtering_strategy:
  skip_double_verification: true  # 跳过双重验证，节省API调用
  use_single_model: true           # 只用一个模型验证

# Marketplaces配置
marketplaces:
  - name: "smithery"
    url: "https://smithery.ai"
    type: "playwright"
  - name: "glama"
    url: "https://glama.ai/mcp/servers"
    type: "playwright"
  - name: "mcpso"
    url: "https://mcp.so"
    type: "playwright"
  - name: "mcphub"
    url: "https://mcphub.com"
    type: "playwright"
  - name: "pulsemcp"
    url: "https://pulsemcp.com/servers"
    type: "sdk"
  - name: "pipedream"
    url: "https://mcp.pipedream.com"
    type: "playwright"

# 数据生成配置
data_generation:
  instruction_per_tool: 5  # 每个工具生成5个指令
  evolution_depth: 1  # WizardLM evolution深度（测试证明1已经很好）
  temperature: 0.7
  max_tokens: 4096

# 数据过滤配置
data_filtering:
  embedding_model: "mixedbread-ai/mxbai-embed-large-v1"
  similarity_threshold: 0.8  # 嵌入相似度阈值
  quality_score_threshold: 4  # 质量评分阈值(0-10)，降低到4更宽松

# 模型训练配置
training:
  backbone_models:
    - "Qwen/Qwen3-0.6B"
    - "Qwen/Qwen3-4B"
    - "meta-llama/Llama-3.1-8B-Instruct"
  lora_rank: 16
  lora_alpha: 32
  learning_rate: 5e-5
  batch_size: 2
  gradient_accumulation_steps: 8
  epochs: 1
  max_length: 8192

# 输出路径
output_paths:
  servers: "data/servers"
  tools: "data/tools"
  instructions: "data/instructions"
  function_calls: "data/function_call"
  trajectories: "data/trajectory"
  filtered_data: "data/filtered"
  models: "models"
